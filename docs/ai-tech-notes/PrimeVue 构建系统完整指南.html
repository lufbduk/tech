<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PrimeVue 构建系统完整指南 | lufbduk 的技术博客</title>
    <meta name="description" content="深入解析 PrimeVue 构建系统的完整流程，包括构建前准备、主构建过程、构建后处理和 API 文档生成">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/tech/assets/style.DjGLoZju.css" as="style">
    <link rel="preload stylesheet" href="/tech/vp-icons.css" as="style">
    
    <script type="module" src="/tech/assets/app.Dh25_jVV.js"></script>
    <link rel="preload" href="/tech/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/tech/assets/chunks/theme.BGN_CCTA.js">
    <link rel="modulepreload" href="/tech/assets/chunks/framework.CEHkq4dy.js">
    <link rel="modulepreload" href="/tech/assets/ai-tech-notes_PrimeVue 构建系统完整指南.md.CEc7Nbb2.lean.js">
    <meta name="author" content="lufbduk">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="lufbduk 的技术博客">
    <meta name="twitter:description" content="聚焦于Web 前端, LLM, AIGC, AI 原生游戏开发, AI 工具等相关技术">
    <link rel="icon" href="/tech/logo.webp">
    <link rel="apple-touch-icon" href="/tech/apple-touch-icon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="keywords" content="PrimeVue构建指南,Vue构建系统,API文档生成,构建流程,前端工程化,组件库构建">
    <meta property="og:title" content="PrimeVue 构建系统完整指南 - 深度解析构建流程">
    <meta property="og:description" content="深入解析 PrimeVue 构建系统的完整流程，包括构建前准备、主构建过程、构建后处理和 API 文档生成">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-cecb633e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c979f278></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c979f278>Skip to content</a><!--]--><!----><header class="VPNav" data-v-cecb633e data-v-0ad68676><div class="VPNavBar" data-v-0ad68676 data-v-ce71e4ef><div class="wrapper" data-v-ce71e4ef><div class="container" data-v-ce71e4ef><div class="title" data-v-ce71e4ef><div class="VPNavBarTitle has-sidebar" data-v-ce71e4ef data-v-7e906684><a class="title" href="/tech/" data-v-7e906684><!--[--><!--]--><!--[--><img class="VPImage logo" src="/tech/logo.avif" alt data-v-e57e63fb><!--]--><span data-v-7e906684>lufbduk 的技术博客</span><!--[--><!--]--></a></div></div><div class="content" data-v-ce71e4ef><div class="content-body" data-v-ce71e4ef><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ce71e4ef><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ce71e4ef data-v-e0cd9371><span id="main-nav-aria-label" class="visually-hidden" data-v-e0cd9371> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tech/" tabindex="0" data-v-e0cd9371 data-v-4aa19863><!--[--><span data-v-4aa19863>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tech/about.html" tabindex="0" data-v-e0cd9371 data-v-4aa19863><!--[--><span data-v-4aa19863>关于</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tech/ai-tech-notes/" tabindex="0" data-v-e0cd9371 data-v-4aa19863><!--[--><span data-v-4aa19863>技术笔记</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tech/ai-creative-notes/" tabindex="0" data-v-e0cd9371 data-v-4aa19863><!--[--><span data-v-4aa19863>创意笔记</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ce71e4ef data-v-b59ebfac><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="true" data-v-b59ebfac data-v-809b7594 data-v-3591f5e2><span class="check" data-v-3591f5e2><span class="icon" data-v-3591f5e2><!--[--><span class="vpi-sun sun" data-v-809b7594></span><span class="vpi-moon moon" data-v-809b7594></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ce71e4ef data-v-e0f2db57 data-v-7a4bfff1><!--[--><a class="VPSocialLink no-icon" href="https://github.com/lufbduk/tech" aria-label="github" target="_blank" rel="noopener" data-v-7a4bfff1 data-v-8e5dce54><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ce71e4ef data-v-8897e953 data-v-ffaaba87><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-ffaaba87><span class="vpi-more-horizontal icon" data-v-ffaaba87></span></button><div class="menu" data-v-ffaaba87><div class="VPMenu" data-v-ffaaba87 data-v-798b97ca><!----><!--[--><!--[--><!----><div class="group" data-v-8897e953><div class="item appearance" data-v-8897e953><p class="label" data-v-8897e953>Appearance</p><div class="appearance-action" data-v-8897e953><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="true" data-v-8897e953 data-v-809b7594 data-v-3591f5e2><span class="check" data-v-3591f5e2><span class="icon" data-v-3591f5e2><!--[--><span class="vpi-sun sun" data-v-809b7594></span><span class="vpi-moon moon" data-v-809b7594></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8897e953><div class="item social-links" data-v-8897e953><div class="VPSocialLinks social-links-list" data-v-8897e953 data-v-7a4bfff1><!--[--><a class="VPSocialLink no-icon" href="https://github.com/lufbduk/tech" aria-label="github" target="_blank" rel="noopener" data-v-7a4bfff1 data-v-8e5dce54><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ce71e4ef data-v-37e0f734><span class="container" data-v-37e0f734><span class="top" data-v-37e0f734></span><span class="middle" data-v-37e0f734></span><span class="bottom" data-v-37e0f734></span></span></button></div></div></div></div><div class="divider" data-v-ce71e4ef><div class="divider-line" data-v-ce71e4ef></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-cecb633e data-v-1b409c8b><div class="container" data-v-1b409c8b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-1b409c8b><span class="vpi-align-left menu-icon" data-v-1b409c8b></span><span class="menu-text" data-v-1b409c8b>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1b409c8b data-v-a203161a><button data-v-a203161a>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-cecb633e data-v-18f7b5ca><div class="curtain" data-v-18f7b5ca></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18f7b5ca><span class="visually-hidden" id="sidebar-aria-label" data-v-18f7b5ca> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-7f5b9a39><section class="VPSidebarItem level-0 collapsible" data-v-7f5b9a39 data-v-a4affe07><div class="item" role="button" tabindex="0" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><h2 class="text" data-v-a4affe07>导航</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4affe07><span class="vpi-chevron-right caret-icon" data-v-a4affe07></span></div></div><div class="items" data-v-a4affe07><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/list.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>内容总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/about.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>关于博客</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-7f5b9a39><section class="VPSidebarItem level-0 collapsible has-active" data-v-7f5b9a39 data-v-a4affe07><div class="item" role="button" tabindex="0" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><h2 class="text" data-v-a4affe07>ai-tech-notes</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4affe07><span class="vpi-chevron-right caret-icon" data-v-a4affe07></span></div></div><div class="items" data-v-a4affe07><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>📚 技术笔记首页</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%AD%E9%9F%B3%E8%BE%93%E5%85%A5%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>浏览器语音输入功能实现方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/%E5%B5%8C%E5%A5%97%20Git%20%E4%BB%93%E5%BA%93%E7%AE%A1%E7%90%86%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>嵌套 Git 仓库管理的最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/%E5%A6%82%E6%9E%9C%E6%9F%90%E4%B8%AA%E9%AB%98%E6%9D%83%E9%99%90%E7%9A%84%E5%9B%A2%E9%98%9F%E6%88%90%E5%91%98%E6%8A%8A%E6%9C%AC%E5%9C%B0%E7%9A%84%20husky%20%E5%8D%B8%E8%BD%BD%E4%BA%86%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%BC%BA%E5%88%B6push%E4%BA%86%E4%BB%A3%E7%A0%81%EF%BC%8C%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E9%87%8C%E7%9A%84%20husky%20%E8%83%BD%E9%98%B2%E5%BE%A1%E5%90%97%EF%BC%9F.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>husky 防御机制分析</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/%E4%BD%BF%E7%94%A8%20IndexedDB%20%E5%92%8C%20Service%20Worker%20%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>IndexedDB 和 Service Worker 动态加载</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/%E4%B8%BA%E4%BB%80%E4%B9%88MongoDB%E7%9A%84%E7%94%A8%E6%88%B7%E8%AF%84%E4%BB%B7%E4%B8%8D%E5%A5%BD.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>为什么MongoDB的用户评价不好</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/GitHub%E4%BB%93%E5%BA%93%E6%B8%85%E9%99%A4%E5%8E%86%E5%8F%B2%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E6%96%B9%E6%B3%95.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>GitHub仓库清除历史提交记录方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/JavaScript-TypeScript-%E6%89%B9%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E7%AE%A1%E7%90%86%E5%8C%85%E6%8E%A8%E8%8D%90.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>JavaScript-TypeScript 批处理流程管理包推荐</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/Nginx%E4%B8%8A%E6%B8%B8%E8%BF%9E%E6%8E%A5%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>Nginx上游连接错误日志分析</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/npm%E5%8C%85%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>npm包依赖管理最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/pnpm%20workspace%E6%96%B0%E5%BB%BApackage%E8%A7%84%E8%8C%83%E6%B5%81%E7%A8%8B.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>pnpm workspace新建package规范流程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/PrimeVue%20%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>PrimeVue 构建系统说明文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/PrimeVue%20%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>PrimeVue 构建系统完整指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/PrimeVue%20Package.json%20%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>PrimeVue Package.json 配置详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/TypeScript%E4%B8%ADtype%E5%92%8Cinterface%E7%9A%84%E8%87%B3%E5%85%B3%E9%87%8D%E8%A6%81%E7%9A%84%E5%8C%BA%E5%88%AB.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>TypeScript中type和interface的区别</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-tech-notes/TypeScript%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88%E5%BB%BA%E8%AE%AE%EF%BC%882025%EF%BC%89.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>TypeScript自动化测试方案建议（2025）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-7f5b9a39><section class="VPSidebarItem level-0 collapsible" data-v-7f5b9a39 data-v-a4affe07><div class="item" role="button" tabindex="0" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><h2 class="text" data-v-a4affe07>ai-creative-notes</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4affe07><span class="vpi-chevron-right caret-icon" data-v-a4affe07></span></div></div><div class="items" data-v-a4affe07><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-creative-notes/" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>🎨 创意笔记首页</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4affe07 data-v-a4affe07><div class="item" data-v-a4affe07><div class="indicator" data-v-a4affe07></div><a class="VPLink link link" href="/tech/ai-creative-notes/%E9%9F%A9%E5%89%A7%E3%80%8A%E5%AF%8C%E8%B1%AA%E5%85%A5%E8%B5%98%E6%88%91%E4%BB%AC%E6%9D%91%E3%80%8B%E5%89%A7%E6%9C%AC%E5%A4%A7%E7%BA%B2.html" data-v-a4affe07><!--[--><p class="text" data-v-a4affe07>韩剧《富豪入赘我们村》剧本大纲</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-cecb633e data-v-53a9cb18><div class="VPDoc has-sidebar has-aside" data-v-53a9cb18 data-v-5a64a79a><!--[--><!--]--><div class="container" data-v-5a64a79a><div class="aside" data-v-5a64a79a><div class="aside-curtain" data-v-5a64a79a></div><div class="aside-container" data-v-5a64a79a><div class="aside-content" data-v-5a64a79a><div class="VPDocAside" data-v-5a64a79a data-v-f8ea3c28><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-f8ea3c28 data-v-b94d89ac><div class="content" data-v-b94d89ac><div class="outline-marker" data-v-b94d89ac></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b94d89ac>On this page</div><ul class="VPDocOutlineItem root" data-v-b94d89ac data-v-80b46526><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-f8ea3c28></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-5a64a79a><div class="content-container" data-v-5a64a79a><!--[--><!--]--><main class="main" data-v-5a64a79a><div style="position:relative;" class="vp-doc _tech_ai-tech-notes_PrimeVue%20%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97" data-v-5a64a79a><div><h1 id="primevue-构建系统完整指南" tabindex="-1">PrimeVue 构建系统完整指南 <a class="header-anchor" href="#primevue-构建系统完整指南" aria-label="Permalink to &quot;PrimeVue 构建系统完整指南&quot;">​</a></h1><blockquote><p><strong>摘要</strong>：本文深入解析 PrimeVue 的完整构建系统，详细介绍构建前准备、主构建过程、构建后处理和 API 文档生成等各个环节，帮助开发者理解大型 Vue 组件库的构建流程。</p></blockquote><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>PrimeVue 使用一套完整的构建系统来管理多包项目的构建、API 文档生成和发布准备。本文档将详细介绍整个构建流程。</p><h2 id="构建流程概览" tabindex="-1">构建流程概览 <a class="header-anchor" href="#构建流程概览" aria-label="Permalink to &quot;构建流程概览&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[开始构建] --&gt; B[prebuild.mjs 构建前准备]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C[主构建过程]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; D[postbuild.mjs 构建后处理]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; E[build-api.js API文档生成]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; F[构建完成]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; B1[清理输出目录]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; B2[同步package.json]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; B3[生成exports配置]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; B4[创建入口文件]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; D1[复制类型文件]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; D2[重命名.d.ts文件]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; D3[复制文档文件]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; D4[清理开发配置]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; E1[生成web-types.json]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; E2[生成vetur-tags.json]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; E3[生成vetur-attributes.json]</span></span></code></pre></div><h2 id="构建脚本详解" tabindex="-1">构建脚本详解 <a class="header-anchor" href="#构建脚本详解" aria-label="Permalink to &quot;构建脚本详解&quot;">​</a></h2><h3 id="_1-prebuild-mjs-构建前准备" tabindex="-1">1. prebuild.mjs - 构建前准备 <a class="header-anchor" href="#_1-prebuild-mjs-构建前准备" aria-label="Permalink to &quot;1. prebuild.mjs - 构建前准备&quot;">​</a></h3><h4 id="作用" tabindex="-1">作用 <a class="header-anchor" href="#作用" aria-label="Permalink to &quot;作用&quot;">​</a></h4><p>在构建开始前执行准备工作，包括环境清理、信息同步和动态配置生成。</p><h4 id="主要功能" tabindex="-1">主要功能 <a class="header-anchor" href="#主要功能" aria-label="Permalink to &quot;主要功能&quot;">​</a></h4><ul><li><strong>清理输出目录</strong>：删除之前的构建结果</li><li><strong>同步 package.json</strong>：从主包同步版本等信息</li><li><strong>动态生成导出配置</strong>：自动扫描组件目录，生成 package.json 的 exports 字段</li><li><strong>生成入口文件</strong>：创建 UMD 和 ESM 格式的入口文件</li></ul><h4 id="工作流程" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程" aria-label="Permalink to &quot;工作流程&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 清理环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeBuild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 同步信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updatePackageJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pkg);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 扫描组件目录，生成 exports 配置</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`./${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">folderName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `./${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">INPUT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">folderName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`./${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">folderName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/style`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `./${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">INPUT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">folderName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/style/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4. 生成入口文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">INPUT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;umd/primevue.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, modules.umd.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">INPUT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, modules.esm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h4 id="输出示例" tabindex="-1">输出示例 <a class="header-anchor" href="#输出示例" aria-label="Permalink to &quot;输出示例&quot;">​</a></h4><p><strong>package.json exports 配置</strong>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/components/button/Button.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./button/style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/components/button/style/ButtonStyle.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./dialog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/components/dialog/Dialog.vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./dialog/style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/components/dialog/style/DialogStyle.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>UMD 入口文件</strong>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/***************** PrimeVue (Auto-Generated) *****************/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Button</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../button/Button.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Button } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../button/Button.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../button/style/ButtonStyle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ButtonStyle } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../button/style/ButtonStyle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="_2-postbuild-mjs-构建后处理" tabindex="-1">2. postbuild.mjs - 构建后处理 <a class="header-anchor" href="#_2-postbuild-mjs-构建后处理" aria-label="Permalink to &quot;2. postbuild.mjs - 构建后处理&quot;">​</a></h3><h4 id="作用-1" tabindex="-1">作用 <a class="header-anchor" href="#作用-1" aria-label="Permalink to &quot;作用&quot;">​</a></h4><p>在构建完成后执行清理和整理工作，准备发布包。</p><h4 id="主要功能-1" tabindex="-1">主要功能 <a class="header-anchor" href="#主要功能-1" aria-label="Permalink to &quot;主要功能&quot;">​</a></h4><ul><li><strong>复制类型声明文件</strong>：将 .d.ts 和 .vue 文件复制到输出目录</li><li><strong>标准化文件名</strong>：将所有 .d.ts 文件重命名为 index.d.ts</li><li><strong>复制必要文件</strong>：复制 package.json、README.md、LICENSE.md</li><li><strong>清理配置</strong>：移除开发时的配置，准备发布</li></ul><h4 id="工作流程-1" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程-1" aria-label="Permalink to &quot;工作流程&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 复制类型文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyDependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">INPUT_DIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OUTPUT_DIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/style&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 标准化类型文件名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">renameDTSFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OUTPUT_DIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 复制文档文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copySync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OUTPUT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/package.json`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copySync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;README.md&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OUTPUT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/README.md`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copySync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;LICENSE.md&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OUTPUT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/LICENSE.md`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4. 清理发布配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearPackageJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OUTPUT_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/package.json`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="_3-build-api-js-api-文档生成器" tabindex="-1">3. build-api.js - API 文档生成器 <a class="header-anchor" href="#_3-build-api-js-api-文档生成器" aria-label="Permalink to &quot;3. build-api.js - API 文档生成器&quot;">​</a></h3><h4 id="作用-2" tabindex="-1">作用 <a class="header-anchor" href="#作用-2" aria-label="Permalink to &quot;作用&quot;">​</a></h4><p>为 IDE 和编辑器生成代码智能提示文件。</p><h4 id="主要功能-2" tabindex="-1">主要功能 <a class="header-anchor" href="#主要功能-2" aria-label="Permalink to &quot;主要功能&quot;">​</a></h4><ul><li><strong>生成 web-types.json</strong>：为 JetBrains IDE（WebStorm、IntelliJ）提供 Vue 组件智能提示</li><li><strong>生成 vetur-tags.json</strong>：为 Vetur（VS Code Vue 扩展）提供标签智能提示</li><li><strong>生成 vetur-attributes.json</strong>：为 Vetur 提供属性智能提示</li></ul><h4 id="工作流程-2" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程-2" aria-label="Permalink to &quot;工作流程&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 扫描组件目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">files.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fileModules[name] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`./components/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 生成各种格式的智能提示文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileModules).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileModules[p][p];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (component) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        createWebTypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(component);      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// JetBrains IDE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        createVeturTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(component);     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// VS Code Vetur 标签</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        createVeturAttributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(component); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// VS Code Vetur 属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 输出文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;web-types.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, webTypesJson);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vetur-tags.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, veturTagsJson);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vetur-attributes.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, veturAttributesJson);</span></span></code></pre></div><h4 id="输出示例-1" tabindex="-1">输出示例 <a class="header-anchor" href="#输出示例-1" aria-label="Permalink to &quot;输出示例&quot;">​</a></h4><p><strong>web-types.json</strong>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;$schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://raw.githubusercontent.com/JetBrains/web-types/master/schema/web-types.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;framework&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PrimeVue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;contributions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;doc-url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://primevue.org/button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Button component&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;attributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Text of the button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;kind&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;expression&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>vetur-tags.json</strong>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Button component&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;attributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;disabled&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="完整构建流程" tabindex="-1">完整构建流程 <a class="header-anchor" href="#完整构建流程" aria-label="Permalink to &quot;完整构建流程&quot;">​</a></h2><h3 id="步骤详解" tabindex="-1">步骤详解 <a class="header-anchor" href="#步骤详解" aria-label="Permalink to &quot;步骤详解&quot;">​</a></h3><h4 id="阶段-1-构建前准备-prebuild-mjs" tabindex="-1">阶段 1: 构建前准备 (prebuild.mjs) <a class="header-anchor" href="#阶段-1-构建前准备-prebuild-mjs" aria-label="Permalink to &quot;阶段 1: 构建前准备 (prebuild.mjs)&quot;">​</a></h4><ol><li><strong>环境清理</strong>：删除之前的构建输出</li><li><strong>信息同步</strong>：从主包同步版本、作者等信息</li><li><strong>组件扫描</strong>：遍历组件目录，发现所有组件</li><li><strong>配置生成</strong>：动态生成 package.json 的 exports 配置</li><li><strong>入口文件</strong>：生成 UMD 和 ESM 两种格式的入口文件</li></ol><h4 id="阶段-2-主构建过程" tabindex="-1">阶段 2: 主构建过程 <a class="header-anchor" href="#阶段-2-主构建过程" aria-label="Permalink to &quot;阶段 2: 主构建过程&quot;">​</a></h4><p>这个阶段由外部构建工具（如 Rollup、Webpack）执行，处理：</p><ul><li>TypeScript 编译</li><li>Vue 单文件组件处理</li><li>代码打包和优化</li><li>CSS 处理</li></ul><h4 id="阶段-3-构建后处理-postbuild-mjs" tabindex="-1">阶段 3: 构建后处理 (postbuild.mjs) <a class="header-anchor" href="#阶段-3-构建后处理-postbuild-mjs" aria-label="Permalink to &quot;阶段 3: 构建后处理 (postbuild.mjs)&quot;">​</a></h4><ol><li><strong>类型文件处理</strong>：复制和重命名 TypeScript 声明文件</li><li><strong>文档复制</strong>：复制 README、LICENSE 等文件</li><li><strong>配置清理</strong>：移除开发时的配置，优化发布包</li></ol><h4 id="阶段-4-api-文档生成-build-api-js" tabindex="-1">阶段 4: API 文档生成 (build-api.js) <a class="header-anchor" href="#阶段-4-api-文档生成-build-api-js" aria-label="Permalink to &quot;阶段 4: API 文档生成 (build-api.js)&quot;">​</a></h4><ol><li><strong>组件定义加载</strong>：动态加载所有组件的 API 定义</li><li><strong>智能提示生成</strong>：为不同 IDE 生成相应格式的智能提示文件</li><li><strong>文档链接</strong>：为每个组件添加官方文档链接</li></ol><h2 id="开发指南" tabindex="-1">开发指南 <a class="header-anchor" href="#开发指南" aria-label="Permalink to &quot;开发指南&quot;">​</a></h2><h3 id="添加新组件" tabindex="-1">添加新组件 <a class="header-anchor" href="#添加新组件" aria-label="Permalink to &quot;添加新组件&quot;">​</a></h3><h4 id="_1-创建组件目录结构" tabindex="-1">1. 创建组件目录结构 <a class="header-anchor" href="#_1-创建组件目录结构" aria-label="Permalink to &quot;1. 创建组件目录结构&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/components/newcomponent/</span></span>
<span class="line"><span>├── NewComponent.vue        # 主组件</span></span>
<span class="line"><span>├── style/</span></span>
<span class="line"><span>│   └── NewComponentStyle.js # 样式文件</span></span>
<span class="line"><span>└── index.js               # 组件定义（用于API生成）</span></span></code></pre></div><h4 id="_2-组件定义示例-index-js" tabindex="-1">2. 组件定义示例 (index.js) <a class="header-anchor" href="#_2-组件定义示例-index-js" aria-label="Permalink to &quot;2. 组件定义示例 (index.js)&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;NewComponent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;新组件的描述&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;doc-url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;newcomponent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可选，默认使用组件名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    props: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;any&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;null&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;组件的值&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;disabled&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;boolean&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;false&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;是否禁用组件&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    events: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;change&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;值改变时触发&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            arguments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;any&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;新的值&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    slots: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;默认插槽内容&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;header&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;头部插槽内容&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="_3-自动化处理" tabindex="-1">3. 自动化处理 <a class="header-anchor" href="#_3-自动化处理" aria-label="Permalink to &quot;3. 自动化处理&quot;">​</a></h4><p>构建脚本会自动：</p><ul><li>在 package.json 中添加导出配置</li><li>在入口文件中添加导出语句</li><li>生成 IDE 智能提示配置</li><li>创建文档链接</li></ul><h3 id="环境变量配置" tabindex="-1">环境变量配置 <a class="header-anchor" href="#环境变量配置" aria-label="Permalink to &quot;环境变量配置&quot;">​</a></h3><p>构建脚本依赖以下环境变量：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 package.json scripts 中设置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;scripts&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;prebuild&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;INPUT_DIR=src/ OUTPUT_DIR=dist/ node scripts/prebuild.mjs&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;postbuild&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;INPUT_DIR=src/ OUTPUT_DIR=dist/ node scripts/postbuild.mjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>或使用 .env 文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INPUT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">src/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OUTPUT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dist/</span></span></code></pre></div><h3 id="完整构建命令" tabindex="-1">完整构建命令 <a class="header-anchor" href="#完整构建命令" aria-label="Permalink to &quot;完整构建命令&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;clean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rimraf dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;prebuild&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;INPUT_DIR=src/ OUTPUT_DIR=dist/ node scripts/prebuild.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rollup -c rollup.config.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;postbuild&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;INPUT_DIR=src/ OUTPUT_DIR=dist/ node scripts/postbuild.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build-api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;INPUT_DIR=src/ OUTPUT_DIR=dist/ node scripts/build-api.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build:complete&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm run clean &amp;&amp; npm run prebuild &amp;&amp; npm run build &amp;&amp; npm run postbuild &amp;&amp; npm run build-api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build:watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm run prebuild &amp;&amp; rollup -c rollup.config.js --watch&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><h3 id="✅-推荐做法" tabindex="-1">✅ 推荐做法 <a class="header-anchor" href="#✅-推荐做法" aria-label="Permalink to &quot;✅ 推荐做法&quot;">​</a></h3><ol><li><p><strong>组件定义完整性</strong></p><ul><li>确保每个组件都有完整的 API 定义</li><li>包含所有 props、events、slots 的详细描述</li><li>提供准确的类型信息</li></ul></li><li><p><strong>命名一致性</strong></p><ul><li>组件文件名、目录名、导出名保持一致</li><li>使用 PascalCase 命名组件</li><li>样式文件名遵循 <code>{ComponentName}Style.js</code> 格式</li></ul></li><li><p><strong>样式分离</strong></p><ul><li>样式文件独立于主组件文件</li><li>支持按需加载样式</li><li>保持样式模块化</li></ul></li><li><p><strong>文档同步</strong></p><ul><li>API 定义与实际组件实现保持同步</li><li>及时更新组件描述和示例</li><li>确保文档链接有效</li></ul></li><li><p><strong>版本管理</strong></p><ul><li>统一在主 package.json 中管理版本</li><li>让构建脚本自动同步版本信息</li><li>避免手动维护多个版本号</li></ul></li></ol><h3 id="❌-避免做法" tabindex="-1">❌ 避免做法 <a class="header-anchor" href="#❌-避免做法" aria-label="Permalink to &quot;❌ 避免做法&quot;">​</a></h3><ol><li><p><strong>手动维护导出</strong></p><ul><li>不要手动编辑自动生成的入口文件</li><li>不要直接修改 package.json 的 exports 字段</li><li>依赖构建脚本自动生成配置</li></ul></li><li><p><strong>跳过构建步骤</strong></p><ul><li>每个构建阶段都有其重要作用</li><li>不要省略 prebuild 或 postbuild 步骤</li><li>确保 API 文档生成步骤执行</li></ul></li><li><p><strong>硬编码路径</strong></p><ul><li>使用环境变量而不是硬编码路径</li><li>保持构建脚本的灵活性</li><li>支持不同的项目结构</li></ul></li><li><p><strong>忽略类型定义</strong></p><ul><li>确保每个组件都有 TypeScript 类型定义</li><li>不要忽略 .d.ts 文件的生成和复制</li><li>保持类型安全</li></ul></li></ol><h2 id="故障排除" tabindex="-1">故障排除 <a class="header-anchor" href="#故障排除" aria-label="Permalink to &quot;故障排除&quot;">​</a></h2><h3 id="常见问题及解决方案" tabindex="-1">常见问题及解决方案 <a class="header-anchor" href="#常见问题及解决方案" aria-label="Permalink to &quot;常见问题及解决方案&quot;">​</a></h3><h4 id="q-新组件没有出现在-ide-智能提示中" tabindex="-1">Q: 新组件没有出现在 IDE 智能提示中？ <a class="header-anchor" href="#q-新组件没有出现在-ide-智能提示中" aria-label="Permalink to &quot;Q: 新组件没有出现在 IDE 智能提示中？&quot;">​</a></h4><p><strong>可能原因</strong>：</p><ul><li>组件定义文件缺失或格式错误</li><li>build-api.js 未正确执行</li><li>IDE 缓存未刷新</li></ul><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 检查组件定义文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/components/newcomponent/index.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 重新生成 API 文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-api</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 重启 IDE 并清理缓存</span></span></code></pre></div><h4 id="q-构建后类型文件缺失" tabindex="-1">Q: 构建后类型文件缺失？ <a class="header-anchor" href="#q-构建后类型文件缺失" aria-label="Permalink to &quot;Q: 构建后类型文件缺失？&quot;">​</a></h4><p><strong>可能原因</strong>：</p><ul><li>postbuild.mjs 未正确执行</li><li>copyDependencies 函数调用失败</li><li>输出目录权限问题</li></ul><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 检查输出目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 重新执行 postbuild</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postbuild</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 检查文件权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/</span></span></code></pre></div><h4 id="q-package-json-exports-配置错误" tabindex="-1">Q: package.json exports 配置错误？ <a class="header-anchor" href="#q-package-json-exports-配置错误" aria-label="Permalink to &quot;Q: package.json exports 配置错误？&quot;">​</a></h4><p><strong>可能原因</strong>：</p><ul><li>组件目录结构不符合约定</li><li>prebuild.mjs 扫描失败</li><li>环境变量未正确设置</li></ul><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 检查环境变量</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $INPUT_DIR $OUTPUT_DIR</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 验证目录结构</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/components</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;*.vue&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 重新执行 prebuild</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prebuild</span></span></code></pre></div><h4 id="q-智能提示文件格式错误" tabindex="-1">Q: 智能提示文件格式错误？ <a class="header-anchor" href="#q-智能提示文件格式错误" aria-label="Permalink to &quot;Q: 智能提示文件格式错误？&quot;">​</a></h4><p><strong>可能原因</strong>：</p><ul><li>组件定义中的数据格式不正确</li><li>JSON 序列化失败</li><li>文件写入权限问题</li></ul><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 验证 JSON 格式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;console.log(JSON.parse(require(&#39;fs&#39;).readFileSync(&#39;dist/web-types.json&#39;, &#39;utf8&#39;)))&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 检查组件定义格式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/build-api.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 重新生成文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-api</span></span></code></pre></div><h3 id="调试技巧" tabindex="-1">调试技巧 <a class="header-anchor" href="#调试技巧" aria-label="Permalink to &quot;调试技巧&quot;">​</a></h3><h4 id="_1-添加调试日志" tabindex="-1">1. 添加调试日志 <a class="header-anchor" href="#_1-添加调试日志" aria-label="Permalink to &quot;1. 添加调试日志&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在 prebuild.mjs 中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;扫描到的组件:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;生成的 UMD 模块数量:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, modules.umd.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在 build-api.js 中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;加载的组件定义:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileModules));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;生成的智能提示标签数量:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(veturTags).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="_2-检查中间文件" tabindex="-1">2. 检查中间文件 <a class="header-anchor" href="#_2-检查中间文件" aria-label="Permalink to &quot;2. 检查中间文件&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查生成的入口文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/umd/primevue.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 package.json exports</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;console.log(require(&#39;./package.json&#39;).exports)&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证智能提示文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/web-types.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/vetur-tags.json</span></span></code></pre></div><h4 id="_3-分步骤调试" tabindex="-1">3. 分步骤调试 <a class="header-anchor" href="#_3-分步骤调试" aria-label="Permalink to &quot;3. 分步骤调试&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单独执行各个步骤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prebuild</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 检查是否正常</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 检查是否正常  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postbuild</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 检查是否正常</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-api</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 检查是否正常</span></span></code></pre></div><h2 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h2><h3 id="构建性能优化" tabindex="-1">构建性能优化 <a class="header-anchor" href="#构建性能优化" aria-label="Permalink to &quot;构建性能优化&quot;">​</a></h3><ol><li><p><strong>增量构建</strong></p><ul><li>只重新构建改变的组件</li><li>缓存中间结果</li><li>使用文件监视模式</li></ul></li><li><p><strong>并行处理</strong></p><ul><li>并行处理多个组件</li><li>异步文件操作</li><li>优化文件复制</li></ul></li><li><p><strong>缓存策略</strong></p><ul><li>缓存组件定义解析结果</li><li>复用智能提示文件</li><li>避免重复计算</li></ul></li></ol><h3 id="输出优化" tabindex="-1">输出优化 <a class="header-anchor" href="#输出优化" aria-label="Permalink to &quot;输出优化&quot;">​</a></h3><ol><li><p><strong>文件大小</strong></p><ul><li>移除不必要的注释</li><li>压缩 JSON 输出</li><li>优化文件结构</li></ul></li><li><p><strong>加载性能</strong></p><ul><li>支持树摇优化</li><li>按需加载样式</li><li>模块化导出</li></ul></li></ol><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>PrimeVue 构建系统通过三个关键脚本实现了：</p><ul><li>🔄 <strong>完全自动化</strong> - 从组件发现到发布准备的全流程自动化</li><li>📝 <strong>智能提示支持</strong> - 为主流 IDE 和编辑器提供完整的智能提示</li><li>🏗️ <strong>动态配置生成</strong> - 自动发现新组件并生成相应配置</li><li>🧹 <strong>清理和优化</strong> - 自动清理开发配置，优化发布包体积</li><li>📚 <strong>类型安全</strong> - 完整的 TypeScript 类型定义支持</li><li>🔧 <strong>灵活配置</strong> - 通过环境变量支持不同的项目结构</li></ul><p>这套系统大大简化了多组件库的维护工作，提高了开发效率，确保了构建质量和开发体验的一致性。新加入的开发者只需要遵循组件结构约定，其余工作都会由构建系统自动完成。</p></div></div></main><footer class="VPDocFooter" data-v-5a64a79a data-v-54a90a4a><!--[--><!--]--><div class="edit-info" data-v-54a90a4a><!----><div class="last-updated" data-v-54a90a4a><p class="VPLastUpdated" data-v-54a90a4a data-v-08208c09>Last updated: <time datetime="2025-06-07T08:18:02.000Z" data-v-08208c09></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-54a90a4a><span class="visually-hidden" id="doc-footer-aria-label" data-v-54a90a4a>Pager</span><div class="pager" data-v-54a90a4a><a class="VPLink link pager-link prev" href="/tech/ai-tech-notes/PrimeVue%20%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.html" data-v-54a90a4a><!--[--><span class="desc" data-v-54a90a4a>Previous page</span><span class="title" data-v-54a90a4a>PrimeVue 构建系统说明文档</span><!--]--></a></div><div class="pager" data-v-54a90a4a><a class="VPLink link pager-link next" href="/tech/ai-tech-notes/PrimeVue%20Package.json%20%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3.html" data-v-54a90a4a><!--[--><span class="desc" data-v-54a90a4a>Next page</span><span class="title" data-v-54a90a4a>PrimeVue Package.json 配置详解</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"CvQtcLXC\",\"ai-creative-notes_index.md\":\"Cv82FrJI\",\"ai-creative-notes_韩剧《富豪入赘我们村》剧本大纲.md\":\"D-pQEj9d\",\"ai-tech-notes_github仓库清除历史提交记录方法.md\":\"CoGoIMDI\",\"ai-tech-notes_index.md\":\"CtaACQhD\",\"ai-tech-notes_javascript-typescript-批处理流程管理包推荐.md\":\"DBMSEo-u\",\"ai-tech-notes_nginx上游连接错误日志分析.md\":\"Bsij_-xp\",\"ai-tech-notes_npm包依赖管理最佳实践.md\":\"BOPCinnh\",\"ai-tech-notes_pnpm workspace新建package规范流程.md\":\"BBzicLxz\",\"ai-tech-notes_primevue package.json 配置详解.md\":\"k0GMMPpK\",\"ai-tech-notes_primevue 构建系统完整指南.md\":\"CEc7Nbb2\",\"ai-tech-notes_primevue 构建系统说明文档.md\":\"BObopJ8g\",\"ai-tech-notes_typescript中type和interface的至关重要的区别.md\":\"Bpg_a0Sm\",\"ai-tech-notes_typescript自动化测试方案建议（2025）.md\":\"BZm1q5lD\",\"ai-tech-notes_为什么mongodb的用户评价不好.md\":\"B2gAep8s\",\"ai-tech-notes_使用 indexeddb 和 service worker 动态加载前端代码.md\":\"BIGwkkgz\",\"ai-tech-notes_如果某个高权限的团队成员把本地的 husky 卸载了，并且强制push了代码，远程仓库里的 husky 能防御吗？.md\":\"B7QhW9lq\",\"ai-tech-notes_嵌套 git 仓库管理的最佳实践.md\":\"BVyL5xJa\",\"ai-tech-notes_浏览器语音输入功能实现方法.md\":\"BGtP4Dat\",\"index.md\":\"Cd558uko\",\"list.md\":\"pWElAF2R\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"lufbduk 的技术博客\",\"description\":\"聚焦于Web 前端, LLM, AIGC, AI 原生游戏开发, AI 工具等相关技术\",\"base\":\"/tech/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":\"dark\",\"themeConfig\":{\"logo\":\"/logo.avif\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"关于\",\"link\":\"/about\"},{\"text\":\"技术笔记\",\"link\":\"/ai-tech-notes/\"},{\"text\":\"创意笔记\",\"link\":\"/ai-creative-notes/\"}],\"sidebar\":[{\"text\":\"导航\",\"collapsed\":false,\"items\":[{\"text\":\"内容总览\",\"link\":\"/list\"},{\"text\":\"关于博客\",\"link\":\"/about\"}]},{\"text\":\"ai-tech-notes\",\"collapsed\":false,\"items\":[{\"text\":\"📚 技术笔记首页\",\"link\":\"/ai-tech-notes/\"},{\"text\":\"浏览器语音输入功能实现方法\",\"link\":\"/ai-tech-notes/浏览器语音输入功能实现方法\"},{\"text\":\"嵌套 Git 仓库管理的最佳实践\",\"link\":\"/ai-tech-notes/嵌套 Git 仓库管理的最佳实践\"},{\"text\":\"husky 防御机制分析\",\"link\":\"/ai-tech-notes/如果某个高权限的团队成员把本地的 husky 卸载了，并且强制push了代码，远程仓库里的 husky 能防御吗？\"},{\"text\":\"IndexedDB 和 Service Worker 动态加载\",\"link\":\"/ai-tech-notes/使用 IndexedDB 和 Service Worker 动态加载前端代码\"},{\"text\":\"为什么MongoDB的用户评价不好\",\"link\":\"/ai-tech-notes/为什么MongoDB的用户评价不好\"},{\"text\":\"GitHub仓库清除历史提交记录方法\",\"link\":\"/ai-tech-notes/GitHub仓库清除历史提交记录方法\"},{\"text\":\"JavaScript-TypeScript 批处理流程管理包推荐\",\"link\":\"/ai-tech-notes/JavaScript-TypeScript-批处理流程管理包推荐\"},{\"text\":\"Nginx上游连接错误日志分析\",\"link\":\"/ai-tech-notes/Nginx上游连接错误日志分析\"},{\"text\":\"npm包依赖管理最佳实践\",\"link\":\"/ai-tech-notes/npm包依赖管理最佳实践\"},{\"text\":\"pnpm workspace新建package规范流程\",\"link\":\"/ai-tech-notes/pnpm workspace新建package规范流程\"},{\"text\":\"PrimeVue 构建系统说明文档\",\"link\":\"/ai-tech-notes/PrimeVue 构建系统说明文档\"},{\"text\":\"PrimeVue 构建系统完整指南\",\"link\":\"/ai-tech-notes/PrimeVue 构建系统完整指南\"},{\"text\":\"PrimeVue Package.json 配置详解\",\"link\":\"/ai-tech-notes/PrimeVue Package.json 配置详解\"},{\"text\":\"TypeScript中type和interface的区别\",\"link\":\"/ai-tech-notes/TypeScript中type和interface的至关重要的区别\"},{\"text\":\"TypeScript自动化测试方案建议（2025）\",\"link\":\"/ai-tech-notes/TypeScript自动化测试方案建议（2025）\"}]},{\"text\":\"ai-creative-notes\",\"collapsed\":false,\"items\":[{\"text\":\"🎨 创意笔记首页\",\"link\":\"/ai-creative-notes/\"},{\"text\":\"韩剧《富豪入赘我们村》剧本大纲\",\"link\":\"/ai-creative-notes/韩剧《富豪入赘我们村》剧本大纲\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/lufbduk/tech\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>