import{_ as e,c as i,o as a,ae as n}from"./chunks/framework.CEHkq4dy.js";const c=JSON.parse('{"title":"npm åŒ…ä¾èµ–ç®¡ç†æœ€ä½³å®è·µï¼šdependencies ä¸ peerDependencies æ·±åº¦è§£æ","description":"æ·±å…¥æ¢è®¨ npm ä¸­ dependencies å’Œ peerDependencies çš„åŒºåˆ«ã€å®‰è£…è¡Œä¸ºã€æ‰“åŒ…å½±å“ä»¥åŠæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…é¿å…ä¾èµ–å†²çªå’Œå†—ä½™å®‰è£…ã€‚","frontmatter":{"title":"npm åŒ…ä¾èµ–ç®¡ç†æœ€ä½³å®è·µï¼šdependencies ä¸ peerDependencies æ·±åº¦è§£æ","description":"æ·±å…¥æ¢è®¨ npm ä¸­ dependencies å’Œ peerDependencies çš„åŒºåˆ«ã€å®‰è£…è¡Œä¸ºã€æ‰“åŒ…å½±å“ä»¥åŠæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…é¿å…ä¾èµ–å†²çªå’Œå†—ä½™å®‰è£…ã€‚","date":"2025-01-24T00:00:00.000Z","tags":["npm","åŒ…ç®¡ç†","dependencies","peerDependencies","Node.js","å‰ç«¯å·¥ç¨‹åŒ–"],"keywords":"npm, dependencies, peerDependencies, package.json, node_modules, æ‰“åŒ…, webpack, externals, ä¾èµ–ç®¡ç†, å‰ç«¯å¼€å‘, JavaScript, Node.js, æœ€ä½³å®è·µ, ç‰ˆæœ¬å†²çª, å…±äº«ä¾èµ–","author":"lufbduk","category":"æŠ€æœ¯ç¬”è®°","head":[["meta",{"name":"keywords","content":"npm,dependencies,peerDependencies,package.json,node_modules,æ‰“åŒ…,webpack,externals,ä¾èµ–ç®¡ç†,å‰ç«¯å¼€å‘"}],["meta",{"property":"og:title","content":"npm åŒ…ä¾èµ–ç®¡ç†æœ€ä½³å®è·µï¼šdependencies ä¸ peerDependencies æ·±åº¦è§£æ"}],["meta",{"property":"og:description","content":"æ·±å…¥æ¢è®¨ npm ä¸­ dependencies å’Œ peerDependencies çš„åŒºåˆ«ã€å®‰è£…è¡Œä¸ºã€æ‰“åŒ…å½±å“ä»¥åŠæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…é¿å…ä¾èµ–å†²çªå’Œå†—ä½™å®‰è£…"}]]},"headers":[],"relativePath":"ai-tech-notes/npmåŒ…ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ.md","filePath":"ai-tech-notes/npmåŒ…ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ.md","lastUpdated":1749284282000}'),t={name:"ai-tech-notes/npmåŒ…ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ.md"};function l(p,s,d,h,r,o){return a(),i("div",null,s[0]||(s[0]=[n(`<blockquote><p><strong>æ‘˜è¦</strong>ï¼šæœ¬æ–‡æ·±å…¥åˆ†æ npm ä¸­ dependencies å’Œ peerDependencies çš„æ ¸å¿ƒåŒºåˆ«ï¼ŒåŒ…æ‹¬å®‰è£…è¡Œä¸ºã€æ‰“åŒ…å½±å“ã€ç‰ˆæœ¬å†²çªå¤„ç†ç­‰å…³é”®æ–¹é¢ï¼Œæä¾›å®ç”¨çš„ä¾èµ–ç®¡ç†æœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…é¿å…å¸¸è§çš„ä¾èµ–é—®é¢˜ã€‚</p></blockquote><p>==================================================</p><p>peerDependencies å’Œ dependencies åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«</p><p>==================================================</p><p>åœ¨ npm çš„ <code>package.json</code> æ–‡ä»¶ä¸­ï¼Œ<code>dependencies</code> å’Œ <code>peerDependencies</code> éƒ½ç”¨äºç®¡ç†ä¾èµ–ï¼Œä½†å®ƒä»¬çš„ç”¨é€”å’Œè¡Œä¸ºæœ‰æœ¬è´¨åŒºåˆ«ï¼š</p><hr><h3 id="_1-dependencies" tabindex="-1"><strong>1. dependencies</strong> <a class="header-anchor" href="#_1-dependencies" aria-label="Permalink to &quot;**1. dependencies**&quot;">â€‹</a></h3><ul><li><strong>ç”¨é€”</strong>ï¼šå£°æ˜å½“å‰åŒ…<strong>ç›´æ¥ä¾èµ–</strong>çš„ç¬¬ä¸‰æ–¹åº“ã€‚</li><li><strong>å®‰è£…è¡Œä¸º</strong>ï¼š <ul><li>å½“ç”¨æˆ·å®‰è£…ä½ çš„åŒ…æ—¶ï¼Œè¿™äº›ä¾èµ–ä¼šè¢«<strong>è‡ªåŠ¨å®‰è£…</strong>åˆ°ä½ çš„ <code>node_modules</code> ä¸­ã€‚</li><li>å¦‚æœä¾èµ–åº“æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œnpm/yarn ä¼šé€šè¿‡åµŒå¥—å®‰è£…è§£å†³å†²çªï¼ˆä¸åŒåŒ…å¯ä½¿ç”¨å„è‡ªå…¼å®¹çš„ç‰ˆæœ¬ï¼‰ã€‚</li></ul></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<br> ä½ çš„åŒ…<strong>è¿è¡Œæ—¶å¿…é¡»</strong>çš„åº“ï¼ˆä¾‹å¦‚ <code>lodash</code>ã€<code>axios</code> ç­‰ï¼‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lodash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^4.17.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><hr><h3 id="_2-peerdependencies" tabindex="-1"><strong>2. peerDependencies</strong> <a class="header-anchor" href="#_2-peerdependencies" aria-label="Permalink to &quot;**2. peerDependencies**&quot;">â€‹</a></h3><ul><li><strong>ç”¨é€”</strong>ï¼šå£°æ˜å½“å‰åŒ…<strong>éœ€è¦å®¿ä¸»ç¯å¢ƒæä¾›</strong>çš„ä¾èµ–ï¼ˆé€šå¸¸æ˜¯å…±äº«åº“ï¼‰ã€‚</li><li><strong>å®‰è£…è¡Œä¸º</strong>ï¼š <ul><li><strong>ä¸ä¼šè‡ªåŠ¨å®‰è£…</strong>è¿™äº›ä¾èµ–ï¼</li><li>å¦‚æœç”¨æˆ·å®‰è£…ä½ çš„åŒ…æ—¶ï¼Œå®¿ä¸»ç¯å¢ƒ<strong>æ²¡æœ‰å®‰è£…</strong>æŒ‡å®šçš„ä¾èµ–ï¼ˆæˆ–ç‰ˆæœ¬ä¸å…¼å®¹ï¼‰ï¼Œä¼šæŠ›å‡ºè­¦å‘Šï¼ˆnpm &lt;7ï¼‰æˆ–é”™è¯¯ï¼ˆnpm â‰¥7ï¼‰ã€‚</li><li>ç”¨æˆ·å¿…é¡»<strong>æ‰‹åŠ¨å®‰è£…</strong>è¿™äº›ä¾èµ–åˆ°å®¿ä¸»é¡¹ç›®ä¸­ã€‚</li></ul></li><li><strong>è®¾è®¡ç›®çš„</strong>ï¼šé¿å…<strong>é‡å¤å®‰è£…</strong>å’Œ<strong>ç‰ˆæœ¬å†²çª</strong>ï¼ˆå¼ºåˆ¶å…±äº«åŒä¸€ä»½ä¾èµ–ï¼‰ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š <ul><li>æ’ä»¶ç±»åº“ï¼ˆå¦‚ <code>webpack-plugin</code> éœ€è¦å…±äº«å®¿ä¸»é¡¹ç›®çš„ <code>webpack</code>ï¼‰ã€‚</li><li>ç»„ä»¶åº“ï¼ˆå¦‚ React ç»„ä»¶åº“éœ€è¦å…±äº«å®¿ä¸»é¡¹ç›®çš„ <code>react</code>ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;peerDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=16.8.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><hr><h3 id="å…³é”®åŒºåˆ«æ€»ç»“" tabindex="-1"><strong>å…³é”®åŒºåˆ«æ€»ç»“</strong> <a class="header-anchor" href="#å…³é”®åŒºåˆ«æ€»ç»“" aria-label="Permalink to &quot;**å…³é”®åŒºåˆ«æ€»ç»“**&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>dependencies</th><th>peerDependencies</th></tr></thead><tbody><tr><td><strong>å®‰è£…è¡Œä¸º</strong></td><td>è‡ªåŠ¨å®‰è£…åˆ°å½“å‰åŒ… <code>node_modules</code></td><td>ä¸è‡ªåŠ¨å®‰è£…ï¼Œéœ€å®¿ä¸»ç¯å¢ƒæä¾›</td></tr><tr><td><strong>ç‰ˆæœ¬å†²çªè§£å†³</strong></td><td>å…è®¸åµŒå¥—å¤šç‰ˆæœ¬</td><td>å¼ºåˆ¶å®¿ä¸»ç¯å¢ƒå…±äº«å•ç‰ˆæœ¬</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>ç§æœ‰ä¾èµ–ï¼ˆä»…å½“å‰åŒ…éœ€è¦ï¼‰</td><td>å…¬å…±ä¾èµ–ï¼ˆéœ€ä¸å®¿ä¸»å…±äº«ï¼‰</td></tr><tr><td><strong>ç”¨æˆ·è´£ä»»</strong></td><td>æ— éœ€æ‰‹åŠ¨æ“ä½œ</td><td>å¿…é¡»ç¡®ä¿å®¿ä¸»ç¯å¢ƒå®‰è£…æ­£ç¡®ç‰ˆæœ¬</td></tr><tr><td><strong>å…¸å‹ç”¨ä¾‹</strong></td><td><code>axios</code>, <code>lodash</code> ç­‰å·¥å…·åº“</td><td>React ç»„ä»¶åº“ã€Webpack æ’ä»¶ç­‰</td></tr></tbody></table><hr><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-peerdependencies" tabindex="-1"><strong>ä¸ºä»€ä¹ˆéœ€è¦ peerDependenciesï¼Ÿ</strong> <a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-peerdependencies" aria-label="Permalink to &quot;**ä¸ºä»€ä¹ˆéœ€è¦ peerDependenciesï¼Ÿ**&quot;">â€‹</a></h3><p>å‡è®¾ä½ å¼€å‘ä¸€ä¸ª React ç»„ä»¶åº“ï¼š</p><ul><li>å¦‚æœå°†å…¶æ”¾å…¥ <code>dependencies</code>ï¼š<br> ç”¨æˆ·é¡¹ç›®ä¸­å¯èƒ½å®‰è£…<strong>ä¸¤ä»½ React</strong>ï¼ˆä½ çš„ç»„ä»¶åº“å†…ä¸€ä»½ + ç”¨æˆ·é¡¹ç›®ä¸€ä»½ï¼‰ï¼Œå¯¼è‡´æ‰“åŒ…ä½“ç§¯å¢å¤§ï¼Œç”šè‡³å¼•å‘ React ä¸Šä¸‹æ–‡é”™ä¹±ã€‚</li><li>ä½¿ç”¨ <code>peerDependencies</code>ï¼š<br> å¼ºåˆ¶ç»„ä»¶åº“ä¸å®¿ä¸»é¡¹ç›®<strong>å…±äº«åŒä¸€ä»½ React</strong>ï¼Œé¿å…é‡å¤å®‰è£…å’Œç‰ˆæœ¬å†²çªã€‚</li></ul><hr><h3 id="npm-ç‰ˆæœ¬å·®å¼‚" tabindex="-1"><strong>npm ç‰ˆæœ¬å·®å¼‚</strong> <a class="header-anchor" href="#npm-ç‰ˆæœ¬å·®å¼‚" aria-label="Permalink to &quot;**npm ç‰ˆæœ¬å·®å¼‚**&quot;">â€‹</a></h3><ul><li><strong>npm v3-v6</strong>ï¼šåªå¯¹ç¼ºå¤±çš„ <code>peerDependencies</code> è¾“å‡ºè­¦å‘Šï¼Œä¸é˜»å¡å®‰è£…ã€‚</li><li><strong>npm v7+</strong>ï¼šè‡ªåŠ¨å®‰è£… <code>peerDependencies</code>ï¼ˆä½†è¦æ±‚ç‰ˆæœ¬èŒƒå›´å…¼å®¹ï¼‰ï¼Œä¸å…¼å®¹åˆ™æŠ¥é”™ã€‚</li><li><strong>Yarn</strong>ï¼šé»˜è®¤ä¸å®‰è£…ï¼Œéœ€é…åˆ <code>yarn install --flat</code> æˆ–æ˜¾å¼æ·»åŠ åˆ°å®¿ä¸»ä¾èµ–ã€‚</li></ul><hr><h3 id="æœ€ä½³å®è·µ" tabindex="-1"><strong>æœ€ä½³å®è·µ</strong> <a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-label="Permalink to &quot;**æœ€ä½³å®è·µ**&quot;">â€‹</a></h3><ol><li><strong>åº“/æ’ä»¶å¼€å‘è€…</strong>ï¼š <ul><li>å°†æ ¸å¿ƒæ¡†æ¶ï¼ˆå¦‚ Reactã€Vueã€Webpackï¼‰æ”¾å…¥ <code>peerDependencies</code> + <code>devDependencies</code>ï¼ˆç”¨äºæœ¬åœ°æµ‹è¯•ï¼‰ã€‚</li><li>ç§æœ‰å·¥å…·åº“æ”¾å…¥ <code>dependencies</code>ã€‚</li></ul></li><li><strong>åº”ç”¨å¼€å‘è€…</strong>ï¼š <ul><li>ç›´æ¥ç®¡ç†æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ <code>peerDependencies</code> è¦æ±‚çš„åº“ï¼‰ï¼Œæ— éœ€ç‰¹æ®Šæ“ä½œã€‚</li></ul></li></ol><p>é€šè¿‡æ­£ç¡®ä½¿ç”¨ä¸¤è€…ï¼Œå¯æ˜¾è‘—é¿å…ä¾èµ–å†²çªå’Œå†—ä½™å®‰è£…é—®é¢˜ã€‚</p><p>==================================================</p><p>å®ƒä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™æœ‰æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«</p><p>==================================================</p><p>åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼ˆå¦‚ä½¿ç”¨ Webpackã€Rollup ç­‰å·¥å…·ï¼‰ï¼Œ<code>dependencies</code> å’Œ <code>peerDependencies</code> çš„å¤„ç†æ–¹å¼æœ‰æ˜¾è‘—åŒºåˆ«ï¼Œç›´æ¥å½±å“æœ€ç»ˆäº§ç‰©çš„ä½“ç§¯å’Œè¿è¡Œæ–¹å¼ï¼š</p><hr><h3 id="_1-dependencies-çš„æ‰“åŒ…è¡Œä¸º" tabindex="-1"><strong>1. dependencies çš„æ‰“åŒ…è¡Œä¸º</strong> <a class="header-anchor" href="#_1-dependencies-çš„æ‰“åŒ…è¡Œä¸º" aria-label="Permalink to &quot;**1. dependencies çš„æ‰“åŒ…è¡Œä¸º**&quot;">â€‹</a></h3><ul><li><strong>é»˜è®¤æ‰“åŒ…è¿›äº§ç‰©</strong><br> å·¥å…·ä¼šå°† <code>dependencies</code> ä¸­çš„æ¨¡å—è§†ä¸º<strong>ç§æœ‰ä¾èµ–</strong>ï¼Œç›´æ¥æ‰“åŒ…è¿›æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ï¼ˆå¦‚ <code>dist/main.js</code>ï¼‰ã€‚</li><li><strong>é‡å¤æ‰“åŒ…é£é™©</strong><br> å¦‚æœå¤šä¸ªåº“ä¾èµ–åŒä¸€ä¸ªåŒ…ï¼ˆå¦‚ <code>lodash</code>ï¼‰ï¼Œæ¯ä¸ªåº“éƒ½ä¼šå°†è‡ªå·±çš„ <code>lodash</code> æ‰“åŒ…è¿›äº§ç‰©ï¼Œå¯¼è‡´ï¼š<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">final-bundle.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LibraryA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> çš„</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.17.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (50KB)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LibraryB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> çš„</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.17.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (50KB)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é‡å¤ï¼</span></span></code></pre></div></li><li><strong>é€‚ç”¨åœºæ™¯</strong><br> é€‚åˆ<strong>ä¸æœŸæœ›å®¿ä¸»ç¯å¢ƒæä¾›</strong>çš„ç§æœ‰å·¥å…·åº“ï¼ˆå¦‚å†…éƒ¨å°è£…çš„ <code>utils</code> ç­‰ï¼‰ã€‚</li></ul><hr><h3 id="_2-peerdependencies-çš„æ‰“åŒ…è¡Œä¸º" tabindex="-1"><strong>2. peerDependencies çš„æ‰“åŒ…è¡Œä¸º</strong> <a class="header-anchor" href="#_2-peerdependencies-çš„æ‰“åŒ…è¡Œä¸º" aria-label="Permalink to &quot;**2. peerDependencies çš„æ‰“åŒ…è¡Œä¸º**&quot;">â€‹</a></h3><ul><li><strong>é»˜è®¤æ’é™¤åœ¨äº§ç‰©å¤–</strong><br> æ‰“åŒ…å·¥å…·ä¼šå°† <code>peerDependencies</code> è§†ä¸º<strong>å¤–éƒ¨ä¾èµ–</strong>ï¼ˆexternalsï¼‰ï¼Œ<strong>ä¸ä¼šæ‰“åŒ…è¿›æœ€ç»ˆäº§ç‰©</strong>ã€‚</li><li><strong>ä¾èµ–å®¿ä¸»ç¯å¢ƒæä¾›</strong><br> åœ¨ä»£ç ä¸­ä¿ç•™ <code>import</code> è¯­å¥ï¼Œè¿è¡Œæ—¶ä»å®¿ä¸»ç¯å¢ƒçš„ <code>node_modules</code> åŠ è½½ï¼š<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ‰“åŒ…åä»£ç ä¿ç•™åŸå§‹å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»å®¿ä¸»é¡¹ç›®è·å–</span></span></code></pre></div></li><li><strong>é¿å…é‡å¤æ‰“åŒ…</strong><br> ç¡®ä¿å¤šä¸ªåº“å…±äº«å®¿ä¸»ç¯å¢ƒçš„åŒä¸€ä»½ä¾èµ–ï¼š<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">final-bundle.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YourComponentLib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ä¸å« </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HostProject</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> çš„</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v18.2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (120KB)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»…ä¸€ä»½</span></span></code></pre></div></li></ul><hr><h3 id="å…³é”®æ‰“åŒ…å·®å¼‚å¯¹æ¯”" tabindex="-1"><strong>å…³é”®æ‰“åŒ…å·®å¼‚å¯¹æ¯”</strong> <a class="header-anchor" href="#å…³é”®æ‰“åŒ…å·®å¼‚å¯¹æ¯”" aria-label="Permalink to &quot;**å…³é”®æ‰“åŒ…å·®å¼‚å¯¹æ¯”**&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>dependencies</th><th>peerDependencies</th></tr></thead><tbody><tr><td><strong>æ˜¯å¦æ‰“åŒ…è¿›äº§ç‰©</strong></td><td>âœ… æ˜¯</td><td>âŒ å¦ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td><strong>æ‰“åŒ…å·¥å…·é…ç½®</strong></td><td>è‡ªåŠ¨åŒ…å«</td><td>éœ€é…ä¸º <code>externals</code> (æˆ–è‡ªåŠ¨è¯†åˆ«)</td></tr><tr><td><strong>äº§ç‰©ä½“ç§¯å½±å“</strong></td><td>å¢å¤§ä½“ç§¯ï¼ˆå¯èƒ½é‡å¤ï¼‰</td><td>ä¸å¢åŠ ä½“ç§¯</td></tr><tr><td><strong>è¿è¡Œæ—¶ä¾èµ–æ¥æº</strong></td><td>å½“å‰åŒ…çš„ <code>node_modules</code></td><td>å®¿ä¸»é¡¹ç›®çš„ <code>node_modules</code></td></tr><tr><td><strong>å…¸å‹åœºæ™¯</strong></td><td>ç§æœ‰å·¥å…·å‡½æ•°ã€å†…éƒ¨åº“</td><td>æ¡†æ¶ç»„ä»¶(React/Vue)ã€æ’ä»¶(Webpack)</td></tr></tbody></table><hr><h3 id="æ‰“åŒ…é…ç½®ç¤ºä¾‹-webpack" tabindex="-1"><strong>æ‰“åŒ…é…ç½®ç¤ºä¾‹ï¼ˆWebpackï¼‰</strong> <a class="header-anchor" href="#æ‰“åŒ…é…ç½®ç¤ºä¾‹-webpack" aria-label="Permalink to &quot;**æ‰“åŒ…é…ç½®ç¤ºä¾‹ï¼ˆWebpackï¼‰**&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.jsï¼ˆç»„ä»¶åº“é…ç½®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  externals: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å…³é”®ï¼šå°† peerDependencies è®¾ä¸ºå¤–éƒ¨ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    react: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;react-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react-dom&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h3 id="ä¸ºä»€ä¹ˆ-peerdependencies-éœ€è¦ç‰¹æ®Šæ‰“åŒ…å¤„ç†" tabindex="-1"><strong>ä¸ºä»€ä¹ˆ peerDependencies éœ€è¦ç‰¹æ®Šæ‰“åŒ…å¤„ç†ï¼Ÿ</strong> <a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-peerdependencies-éœ€è¦ç‰¹æ®Šæ‰“åŒ…å¤„ç†" aria-label="Permalink to &quot;**ä¸ºä»€ä¹ˆ peerDependencies éœ€è¦ç‰¹æ®Šæ‰“åŒ…å¤„ç†ï¼Ÿ**&quot;">â€‹</a></h3><p>ä»¥ React ç»„ä»¶åº“ä¸ºä¾‹ï¼š</p><ol><li><p><strong>é¿å…é‡å¤æ‰“åŒ…</strong><br> è‹¥å°† React æ‰“åŒ…è¿›ç»„ä»¶åº“ï¼Œç”¨æˆ·é¡¹ç›®ä¼šåŒæ—¶å­˜åœ¨ï¼š</p><ul><li>ç»„ä»¶åº“å†…çš„ React (50KB)</li><li>ç”¨æˆ·é¡¹ç›®çš„ React (50KB) â†’ <strong>æ€»ä½“ç§¯å¢åŠ  100KB</strong></li></ul></li><li><p><strong>é¿å…ä¸Šä¸‹æ–‡å†²çª</strong><br> React ä¾èµ–å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆå¦‚ <code>React.createContext</code>ï¼‰ï¼Œå¤šä¸ª React å®ä¾‹ä¼šå¯¼è‡´ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”¨æˆ·é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‰ˆæœ¬ 18</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»„ä»¶åº“å†…éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‰ˆæœ¬ 17 (å·²æ‰“åŒ…è¿›ç»„ä»¶)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯¼è‡´ Contextã€Hooks ç­‰ API å¤±æ•ˆ</span></span></code></pre></div></li></ol><hr><h3 id="peerdependencies-çš„æ‰“åŒ…æ³¨æ„äº‹é¡¹" tabindex="-1"><strong>peerDependencies çš„æ‰“åŒ…æ³¨æ„äº‹é¡¹</strong> <a class="header-anchor" href="#peerdependencies-çš„æ‰“åŒ…æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;**peerDependencies çš„æ‰“åŒ…æ³¨æ„äº‹é¡¹**&quot;">â€‹</a></h3><ol><li><p><strong>å¼€å‘ç¯å¢ƒç‰¹æ®Šå¤„ç†</strong><br> åœ¨ç»„ä»¶åº“çš„æœ¬åœ°å¼€å‘ä¸­ï¼Œéœ€å°† <code>peerDependencies</code> å®‰è£…åˆ° <code>devDependencies</code>ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;peerDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=16.8&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^18.2.0&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ç”¨äºæœ¬åœ°æµ‹è¯•å’Œæ‰“åŒ…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>Tree Shaking ä¼˜åŒ–</strong><br> å½“ <code>peerDependencies</code> è®¾ä¸ºå¤–éƒ¨ä¾èµ–æ—¶ï¼Œå®¿ä¸»é¡¹ç›®çš„æ‰“åŒ…å·¥å…·å¯å¯¹å…±äº«åº“åš Tree Shakingã€‚</p></li><li><p><strong>åŠ¨æ€ä¾èµ–è­¦å‘Š</strong><br> è‹¥ä»£ç åŠ¨æ€åŠ è½½ peer ä¾èµ–ï¼ˆå¦‚ <code>require(&#39;react/&#39; + path)</code>ï¼‰ï¼Œéœ€æ˜¾å¼é…ç½® externalsï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Webpack é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">externals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  react</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    commonjs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    commonjs2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    amd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><hr><h3 id="æ€»ç»“-æ‰“åŒ…å†³ç­–æŒ‡å—" tabindex="-1"><strong>æ€»ç»“ï¼šæ‰“åŒ…å†³ç­–æŒ‡å—</strong> <a class="header-anchor" href="#æ€»ç»“-æ‰“åŒ…å†³ç­–æŒ‡å—" aria-label="Permalink to &quot;**æ€»ç»“ï¼šæ‰“åŒ…å†³ç­–æŒ‡å—**&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th><strong>ä½ çš„åŒ…ç±»å‹</strong></th><th><strong>ä¾èµ–ç±»å‹</strong></th><th><strong>æ‰“åŒ…å»ºè®®</strong></th></tr></thead><tbody><tr><td>åº”ç”¨é¡¹ç›®</td><td>æ‰€æœ‰ä¾èµ–</td><td>å…¨éƒ¨æ‰“åŒ…è¿›äº§ç‰©</td></tr><tr><td>å…¬å…±ç»„ä»¶åº“/æ’ä»¶</td><td>æ¡†æ¶(React/Vue ç­‰)</td><td>peerDependencies + è®¾ä¸º externals</td></tr><tr><td>å…¬å…±ç»„ä»¶åº“/æ’ä»¶</td><td>ç§æœ‰å·¥å…·(å¦‚å†…éƒ¨ utils)</td><td>dependencies + æ‰“åŒ…è¿›äº§ç‰©</td></tr><tr><td>ç‹¬ç«‹è¿è¡Œçš„å·¥å…·åº“</td><td>æ‰€æœ‰å¿…éœ€ä¾èµ–</td><td>dependencies + æ‰“åŒ…è¿›äº§ç‰©</td></tr></tbody></table><p>æ­£ç¡®åŒºåˆ†ä¸¤è€…å¯é¿å… <strong>â€œæ‰“åŒ…ä½“ç§¯è†¨èƒ€â€</strong> å’Œ <strong>â€œå¤šå®ä¾‹å†²çªâ€</strong> ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ã€‚</p><p>==================================================</p><p>çœ‹èµ·æ¥è¿™ä¸ªæŠŠ peerDependencies è®¾ä¸º externals çš„æ­¥éª¤æ˜¯æ‰‹åŠ¨æ‰§è¡Œçš„ï¼Œé‚£å¦‚æœä¸€èˆ¬çš„ dependencies ä¹Ÿè®¾ä¸º externalsï¼Œæ‰“åŒ…çš„æ—¶å€™æœ‰åŒºåˆ«å—</p><p>==================================================</p><p>ä½ è¯´å¾—éå¸¸å¯¹ï¼<strong>å°† <code>peerDependencies</code> è®¾ä¸º <code>externals</code> ç¡®å®æ˜¯æ‰‹åŠ¨é…ç½®çš„</strong>ï¼Œè€Œ <code>dependencies</code> é»˜è®¤æ˜¯ä¼šè¢«æ‰“åŒ…çš„ã€‚ä½†å¦‚æœ<strong>ä¸»åŠ¨å°† <code>dependencies</code> ä¹Ÿè®¾ä¸º <code>externals</code></strong>ï¼Œæ‰“åŒ…è¡Œä¸ºä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†è¿è¡Œæ—¶ä¼šäº§ç”Ÿå…³é”®å·®å¼‚ã€‚ä¸‹é¢é€šè¿‡å¯¹æ¯”å¸®ä½ å½»åº•ç†æ¸…ï¼š</p><hr><h3 id="é…ç½®å¯¹æ¯”å®éªŒ-å‡è®¾æ‰“åŒ…å·¥å…·ä¸º-webpack" tabindex="-1">é…ç½®å¯¹æ¯”å®éªŒï¼ˆå‡è®¾æ‰“åŒ…å·¥å…·ä¸º Webpackï¼‰ <a class="header-anchor" href="#é…ç½®å¯¹æ¯”å®éªŒ-å‡è®¾æ‰“åŒ…å·¥å…·ä¸º-webpack" aria-label="Permalink to &quot;é…ç½®å¯¹æ¯”å®éªŒï¼ˆå‡è®¾æ‰“åŒ…å·¥å…·ä¸º Webpackï¼‰&quot;">â€‹</a></h3><h4 id="åœºæ™¯è®¾å®š" tabindex="-1">åœºæ™¯è®¾å®šï¼š <a class="header-anchor" href="#åœºæ™¯è®¾å®š" aria-label="Permalink to &quot;åœºæ™¯è®¾å®šï¼š&quot;">â€‹</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lodash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^4.17.0&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // ç§æœ‰å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;peerDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=16.8&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // å…±äº«æ¡†æ¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_1-é»˜è®¤è¡Œä¸º-ä¸é…ç½®-externals" tabindex="-1">1. <strong>é»˜è®¤è¡Œä¸ºï¼ˆä¸é…ç½® externalsï¼‰</strong> <a class="header-anchor" href="#_1-é»˜è®¤è¡Œä¸º-ä¸é…ç½®-externals" aria-label="Permalink to &quot;1. **é»˜è®¤è¡Œä¸ºï¼ˆä¸é…ç½® externalsï¼‰**&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>ä¾èµ–ç±»å‹</th><th>æ˜¯å¦æ‰“åŒ…è¿›äº§ç‰©</th><th>è¿è¡Œæ—¶æ¥æº</th><th>é£é™©</th></tr></thead><tbody><tr><td><code>dependencies</code></td><td>âœ… æ˜¯</td><td>å½“å‰åº“çš„ <code>node_modules</code></td><td>æ— </td></tr><tr><td><code>peerDependencies</code></td><td>âŒ å¦</td><td>å®¿ä¸»é¡¹ç›®çš„ <code>node_modules</code></td><td><strong>å®¿ä¸»æœªå®‰è£…åˆ™æŠ¥é”™</strong></td></tr></tbody></table><h4 id="_2-æ‰‹åŠ¨å°†-lodash-dependencies-è®¾ä¸º-externals" tabindex="-1">2. <strong>æ‰‹åŠ¨å°† <code>lodash</code> (dependencies) è®¾ä¸º externals</strong> <a class="header-anchor" href="#_2-æ‰‹åŠ¨å°†-lodash-dependencies-è®¾ä¸º-externals" aria-label="Permalink to &quot;2. **æ‰‹åŠ¨å°† \`lodash\` (dependencies) è®¾ä¸º externals**&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  externals: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lodash: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å…³é”®ï¼šå¼ºåˆ¶å¤–éƒ¨åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><table tabindex="0"><thead><tr><th>ä¾èµ–ç±»å‹</th><th>æ˜¯å¦æ‰“åŒ…è¿›äº§ç‰©</th><th>è¿è¡Œæ—¶æ¥æº</th><th>é£é™©</th></tr></thead><tbody><tr><td><code>dependencies</code></td><td>âŒ å¦</td><td>å®¿ä¸»é¡¹ç›®çš„ <code>node_modules</code></td><td><strong>å®¿ä¸»æœªå®‰è£…åˆ™æŠ¥é”™</strong></td></tr><tr><td><code>peerDependencies</code></td><td>âŒ å¦</td><td>å®¿ä¸»é¡¹ç›®çš„ <code>node_modules</code></td><td><strong>å®¿ä¸»æœªå®‰è£…åˆ™æŠ¥é”™</strong></td></tr></tbody></table><hr><h3 id="å…³é”®åŒºåˆ«è§£æ" tabindex="-1">å…³é”®åŒºåˆ«è§£æ <a class="header-anchor" href="#å…³é”®åŒºåˆ«è§£æ" aria-label="Permalink to &quot;å…³é”®åŒºåˆ«è§£æ&quot;">â€‹</a></h3><h4 id="ğŸ”¥-æ ¸å¿ƒå·®å¼‚-å®‰è£…è´£ä»»æ–¹ä¸åŒ" tabindex="-1">ğŸ”¥ æ ¸å¿ƒå·®å¼‚ï¼š<strong>å®‰è£…è´£ä»»æ–¹ä¸åŒ</strong> <a class="header-anchor" href="#ğŸ”¥-æ ¸å¿ƒå·®å¼‚-å®‰è£…è´£ä»»æ–¹ä¸åŒ" aria-label="Permalink to &quot;ğŸ”¥ æ ¸å¿ƒå·®å¼‚ï¼š**å®‰è£…è´£ä»»æ–¹ä¸åŒ**&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>ä¾èµ–ç±»å‹</th><th>è®¾ä¸º externals åçš„å®é™…è¡Œä¸º</th><th>è´£ä»»æ–¹</th></tr></thead><tbody><tr><td><code>peerDependencies</code></td><td>ç¬¦åˆé¢„æœŸï¼Œå®¿ä¸»<strong>å¿…é¡»å®‰è£…</strong>ï¼ˆæœ¬æ¥å°±æ˜¯å®¿ä¸»è´£ä»»ï¼‰</td><td>âœ… åˆç†</td></tr><tr><td><code>dependencies</code></td><td><strong>è½¬å«è´£ä»»</strong>ï¼Œå®¿ä¸»<strong>æ„å¤–æ‰¿æ‹…</strong>äº†æœ¬ä¸è¯¥å®‰è£…çš„ä¾èµ–</td><td>âŒ ä¸åˆç†</td></tr></tbody></table><h4 id="âš ï¸-é£é™©ç¤ºæ„å›¾" tabindex="-1">âš ï¸ é£é™©ç¤ºæ„å›¾ï¼š <a class="header-anchor" href="#âš ï¸-é£é™©ç¤ºæ„å›¾" aria-label="Permalink to &quot;âš ï¸ é£é™©ç¤ºæ„å›¾ï¼š&quot;">â€‹</a></h4><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[å®¿ä¸»é¡¹ç›®] --&gt; B[ä½¿ç”¨ my-library]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C{ä¾èµ–æ£€æŸ¥}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt;|éœ€è¦ react| D[å®¿ä¸»å·²å®‰è£…]    %% peerDependency åˆç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt;|éœ€è¦ lodash| E[å®¿ä¸»æœªå®‰è£…]   %% dependency å¤–éƒ¨åŒ–å¯¼è‡´é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; F[è¿è¡Œæ—¶å´©æºƒï¼šCannot find module &#39;lodash&#39;]</span></span></code></pre></div><hr><h3 id="ä¸ºä»€ä¹ˆä¸èƒ½éšæ„å°†-dependencies-å¤–éƒ¨åŒ–" tabindex="-1">ä¸ºä»€ä¹ˆä¸èƒ½éšæ„å°† dependencies å¤–éƒ¨åŒ–ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸èƒ½éšæ„å°†-dependencies-å¤–éƒ¨åŒ–" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆä¸èƒ½éšæ„å°† dependencies å¤–éƒ¨åŒ–ï¼Ÿ&quot;">â€‹</a></h3><h4 id="_1-ç ´åå°è£…æ€§" tabindex="-1">1. <strong>ç ´åå°è£…æ€§</strong> <a class="header-anchor" href="#_1-ç ´åå°è£…æ€§" aria-label="Permalink to &quot;1. **ç ´åå°è£…æ€§**&quot;">â€‹</a></h4><ul><li>ä½ çš„åº“å®£ç§°ï¼šâ€æˆ‘è‡ªå¸¦ <code>lodash</code>ï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒâ€œ</li><li>ä½†å¤–éƒ¨åŒ–åå®é™…å˜æˆï¼šâ€æˆ‘ç”¨ <code>lodash</code>ï¼Œä½†ç”¨æˆ·å¾—è‡ªå·±è£…â€œ</li><li><strong>ç›¸å½“äºæŠŠç§æœ‰ä¾èµ–å˜æˆäº†éšå½¢çš„ peerDependency</strong></li></ul><h4 id="_2-ç‰ˆæœ¬å†²çªé£é™©" tabindex="-1">2. <strong>ç‰ˆæœ¬å†²çªé£é™©</strong> <a class="header-anchor" href="#_2-ç‰ˆæœ¬å†²çªé£é™©" aria-label="Permalink to &quot;2. **ç‰ˆæœ¬å†²çªé£é™©**&quot;">â€‹</a></h4><ul><li>ä½ çš„åº“æµ‹è¯•çš„æ˜¯ <code>lodash@4.17.0</code></li><li>å®¿ä¸»é¡¹ç›®è£…äº† <code>lodash@3.0.0</code>ï¼ˆæ—§ç‰ˆç¼ºå°‘æŸäº› APIï¼‰</li><li><strong>è¿è¡Œæ—¶æŠ¥é”™</strong>ï¼š<code>this.merge is not a function</code>ï¼ˆå®é™…æ˜¯ <code>_.merge</code> åœ¨ v3 ä¸å­˜åœ¨ï¼‰</li></ul><h4 id="_3-å®‰è£…è¯­ä¹‰æ··æ·†" tabindex="-1">3. <strong>å®‰è£…è¯­ä¹‰æ··æ·†</strong> <a class="header-anchor" href="#_3-å®‰è£…è¯­ä¹‰æ··æ·†" aria-label="Permalink to &quot;3. **å®‰è£…è¯­ä¹‰æ··æ·†**&quot;">â€‹</a></h4><ul><li>ç”¨æˆ·çœ‹åˆ° <code>package.json</code> ä¸­åªæœ‰ <code>&quot;my-library&quot;: &quot;^1.0.0&quot;</code></li><li>å®‰è£…åå´è¦æ±‚æ‰‹åŠ¨è£… <code>lodash</code>ï¼ˆç”¨æˆ·ï¼šï¼Ÿï¼Ÿï¼Ÿï¼‰</li></ul><hr><h3 id="ä½•æ—¶å¯ä»¥ä¸»åŠ¨å¤–éƒ¨åŒ–-dependencies" tabindex="-1">ä½•æ—¶å¯ä»¥ä¸»åŠ¨å¤–éƒ¨åŒ– dependenciesï¼Ÿ <a class="header-anchor" href="#ä½•æ—¶å¯ä»¥ä¸»åŠ¨å¤–éƒ¨åŒ–-dependencies" aria-label="Permalink to &quot;ä½•æ—¶å¯ä»¥ä¸»åŠ¨å¤–éƒ¨åŒ– dependenciesï¼Ÿ&quot;">â€‹</a></h3><h4 id="âœ…-åˆç†åœºæ™¯" tabindex="-1">âœ… åˆç†åœºæ™¯ï¼š <a class="header-anchor" href="#âœ…-åˆç†åœºæ™¯" aria-label="Permalink to &quot;âœ… åˆç†åœºæ™¯ï¼š&quot;">â€‹</a></h4><ol><li><p><strong>å¾®å‰ç«¯å…±äº«ä¾èµ–</strong><br> ä¸»åº”ç”¨å·²é€šè¿‡ <code>&lt;script&gt;</code> å…¨å±€æš´éœ² <code>lodash</code>ï¼Œå­åº”ç”¨å¤ç”¨ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">externals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  lodash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;_&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ˜ å°„åˆ°å…¨å±€å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>CDN ä¾èµ–ä¼˜åŒ–</strong><br> å¤§å‹åº“ï¼ˆå¦‚ three.jsï¼‰é€šè¿‡ CDN å¼•å…¥ï¼š</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- å®¿ä¸» HTML --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">externals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;three&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;THREE&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><h4 id="â›”-é”™è¯¯åœºæ™¯" tabindex="-1">â›” é”™è¯¯åœºæ™¯ï¼š <a class="header-anchor" href="#â›”-é”™è¯¯åœºæ™¯" aria-label="Permalink to &quot;â›” é”™è¯¯åœºæ™¯ï¼š&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åæ¨¡å¼ï¼šå°†ç§æœ‰å·¥å…·åº“å¤–éƒ¨åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">externals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;internal-utils&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;internalUtils&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å®¿ä¸»æ ¹æœ¬ä¸çŸ¥é“è¦è£…å®ƒï¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="æœ€ä½³å®è·µæ€»ç»“" tabindex="-1">æœ€ä½³å®è·µæ€»ç»“ <a class="header-anchor" href="#æœ€ä½³å®è·µæ€»ç»“" aria-label="Permalink to &quot;æœ€ä½³å®è·µæ€»ç»“&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ“ä½œ</th><th>æ¨èåº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>peerDependencies + externals</td><td>â­â­â­â­â­</td><td>æ ‡å‡†åšæ³•ï¼Œé¿å…é‡å¤æ‰“åŒ…æ¡†æ¶ä¾èµ–</td></tr><tr><td>dependencies ä¸å¤„ç†</td><td>â­â­â­â­â­</td><td>ç§æœ‰ä¾èµ–åº”æ‰“åŒ…è¿›äº§ç‰©ï¼Œä¿æŒå°è£…æ€§</td></tr><tr><td>dependencies + externals</td><td>â­â˜†</td><td>ä»…åœ¨å®¿ä¸»<strong>æ˜ç¡®å…¨å±€æä¾›</strong>æ—¶ä½¿ç”¨ï¼ˆå¦‚ CDN/å¾®å‰ç«¯ï¼‰ï¼Œéœ€å¼ºçº¦å®š</td></tr><tr><td>peerDependencies ä¸å¤–éƒ¨åŒ–</td><td>âš ï¸ ç¦æ­¢</td><td>ä¼šå¯¼è‡´æ¡†æ¶è¢«æ‰“åŒ…è¿›åº“ï¼Œå¼•å‘é‡å¤å®‰è£…å’Œä¸Šä¸‹æ–‡é”™ä¹±</td></tr></tbody></table><hr><h3 id="ç»ˆæå†³ç­–æ ‘" tabindex="-1">ç»ˆæå†³ç­–æ ‘ <a class="header-anchor" href="#ç»ˆæå†³ç­–æ ‘" aria-label="Permalink to &quot;ç»ˆæå†³ç­–æ ‘&quot;">â€‹</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[æˆ‘çš„ä¾èµ–] --&gt; B{æ˜¯å¦æœŸæœ›å®¿ä¸»å®‰è£…ï¼Ÿ}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt;|æ˜¯ï¼šæ¡†æ¶/æ’ä»¶| C[peerDependencies + è®¾ä¸º externals]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt;|å¦ï¼šç§æœ‰å·¥å…·| D[dependencies + ä¸è®¾ externals]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; E{æ˜¯å¦éœ€CDN/å¾®å‰ç«¯å…±äº«ï¼Ÿ}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt;|æ˜¯| F[ä¸»åŠ¨ externals + æ–‡æ¡£è¯´æ˜]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt;|å¦| G[é»˜è®¤æ‰“åŒ…è¿›äº§ç‰©]</span></span></code></pre></div><p><strong>ç®€å•è¯´ï¼š</strong><br><code>peerDependencies</code> + <code>externals</code> = â€æˆ‘ç”¨å®¿ä¸»çš„ç¯å¢ƒâ€œ<br><code>dependencies</code> ä¸å¤„ç† = â€æˆ‘è‡ªå¸¦å¹²ç²®ï¼Œè‡ªç»™è‡ªè¶³â€œ</p><p>==================================================</p>`,93)]))}const g=e(t,[["render",l]]);export{c as __pageData,g as default};
